# ğŸ“Š Customer Churn Analytics Dashboard

This repository implements an **end-to-end analytics pipeline and executive dashboard** for analyzing customer churn for a subscription-based telecom service. It uses the public **Telco Customer Churn** dataset as a case study. The stack is **SQL â†’ R â†’ Tableau**: raw data is modeled and cleaned in SQL, transformed and aggregated in R, and visualized in a business-friendly Tableau dashboard to identify churn patterns, high-risk customer segments, and revenue at risk.

---

## ğŸ¯ Project Overview

The goal is to:
- Build a **reproducible analytics pipeline** from raw Telco churn data to dashboard-ready outputs.
- **Identify churn patterns** and high-risk customer segments (e.g. by contract type, tenure, services).
- Quantify **revenue at risk** (MRR from churned or at-risk customers) to support retention decisions.
- Deliver an **executive-facing Tableau dashboard** with clear KPIs and actionable insights.
- **Document the workflow** so that raw data â†’ database â†’ queries â†’ exports â†’ dashboard is reproducible and easy to follow.

The pipeline cleanly separates **ingest (SQL)**, **transform (R)**, and **visualize (Tableau)** for maintainability and reuse.

---

## âœ¨ Key Features

- **SQL layer** (`sql/`): Create staging tables, clean and normalize data, and define KPI views for churn rate and revenue at risk.
- **R layer** (`r/`): Extract data from the database, build KPI and driver tables, and export CSVs for Tableau.
- **Tableau dashboard**: Connect to processed CSVs for churn rate, segment breakdowns, and revenue-at-risk visualizations.
- **Structured repository**: Clear separation of raw data, processed outputs, code, and documentation.
- **R dependency file** (`r/utils/requirements.R`) for easy setup of DBI, dplyr, and related packages.

---

## ğŸ“Š Tableau Dashboard

The main deliverable for visual storytelling is an interactive dashboard published on Tableau Public:

**[Customer Churn Dashboard â€” Telco](https://public.tableau.com/app/profile/ilian.khankhalaev/viz/CustomerChurnDashboardTelco/Dashboard1?publish=yes)**

![Customer Churn Dashboard](tableau/Tableau%20Screenshot.png)
_(the [`tableau/`](tableau/) folder contains the Tableau workbook `.twbx` so you can explore it locally)_

The dashboard explores churn rate, high-risk segments, and revenue at risk for a subscription-based telco. It includes:

- **KPI summary** â€” Total customers, churned vs retained, churn rate %, total MRR, MRR at risk, and % revenue at risk.
- **Churn by segment** â€” Bar charts of churn rate by contract type, tenure bucket, internet service, and payment method.
- **Contract Ã— Tenure** â€” Heatmap (or matrix) of churn rate and MRR at risk by contract and tenure band (e.g. month-to-month + low tenure = highest risk).
- **Contract Ã— Internet** â€” Heatmap of churn and revenue at risk by contract and internet service type (e.g. fiber + month-to-month).
- **Revenue focus** â€” MRR vs MRR at risk by contract and by segment to prioritize retention efforts.

---

## ğŸ§± Repository Structure

```
customer-churn-dashboard/
â”‚
â”œâ”€â”€ data/                                  # Dataset storage (raw tracked in Git for GitHub Pages)
â”‚   â”œâ”€â”€ raw/                               # Unmodified input data (as downloaded)
â”‚   â”‚   â””â”€â”€ telco-churn.csv                # Telco Customer Churn source file (Kaggle)
â”‚   â”œâ”€â”€ processed/                         # Cleaned / aggregated CSVs exported for Tableau (generated by R)
â”‚   â””â”€â”€ churn.db                           # SQLite database (not in Git; generated by load script)
â”‚
â”œâ”€â”€ sql/                                   # Schema and queries for the analytics database
â”‚   â”œâ”€â”€ schema/                            # Table definitions
â”‚   â”‚   â””â”€â”€ create_tables.sql              # Create staging table(s) for raw churn data
â”‚   â””â”€â”€ queries/                           # Cleaning, transforms, and KPI views
â”‚       â”œâ”€â”€ 01_clean_staging.sql           # Clean, normalize, and build base table(s)
â”‚       â””â”€â”€ 02_kpi_views.sql               # KPI views (churn rate, revenue at risk, segment breakdowns)
â”‚
â”œâ”€â”€ r/                                     # Extract from SQL, build KPI tables, churn driver analysis
â”‚   â”œâ”€â”€ scripts/                           # Pipeline scripts (run in order)
â”‚   â”‚   â”œâ”€â”€ 01_extract_from_sql.R          # Connect to DB and load staging / base tables into R
â”‚   â”‚   â”œâ”€â”€ 02_kpi_tables.R                # Build KPI aggregates and export to data/processed/
â”‚   â”‚   â””â”€â”€ 03_churn_drivers.R             # Churn driver analysis and segment exports for Tableau
â”‚   â””â”€â”€ utils/                             # Utilities and setup
â”‚       â””â”€â”€ requirements.R                 # R package dependencies (DBI, RSQLite, dplyr, etc.)
â”‚
â”œâ”€â”€ tableau/                               # Dashboard assets (screenshot + workbook)
â”‚   â”œâ”€â”€ Tableau Screenshot.png
â”‚   â””â”€â”€ *.twbx                             # Tableau workbook; data source: data/processed/
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â””â”€â”€ report.md                              # Technical report (methodology, pipeline, reproducibility)
```

> ğŸ—’ï¸ **Note:**  
> - **data/churn.db** is the SQLite database created when you run the SQL load script; it is not in Git.

---

## ğŸ§° Run Locally

You can reproduce the pipeline using **R** (DBI, RSQLite, dplyr, readr) and a SQL engine (SQLite).

### 1ï¸âƒ£ Clone the repository

**HTTPS (recommended for most users):**
```bash
git clone https://github.com/florykhan/customer-churn-dashboard.git
cd customer-churn-dashboard
```

**SSH (for users who have SSH keys configured):**
```bash
git clone git@github.com:florykhan/customer-churn-dashboard.git
cd customer-churn-dashboard
```

### 2ï¸âƒ£ Add the raw dataset

The **Telco Customer Churn** dataset is in `data/raw/telco-churn.csv`. If you need to re-download it, place the CSV there (same path).

> ğŸ“¥ **Download the dataset:** [Kaggle â€“ Telco Customer Churn](https://www.kaggle.com/datasets/blastchar/telco-customer-churn)

### 3ï¸âƒ£ Run the SQL pipeline

Run the following from the **`project root`** (so `churn.db` is created there and `raw/telco-churn.csv` is found). If you use **SQLite** (e.g. `sqlite3` in terminal):

```bash
cd data
sqlite3 churn.db < ../sql/schema/create_tables.sql
sqlite3 -csv -header churn.db ".import 'raw/telco-churn.csv' staging_churn"
sqlite3 churn.db < ../sql/queries/01_clean_staging.sql
sqlite3 churn.db < ../sql/queries/02_kpi_views.sql
cd ..
```

This creates `data/churn.db` with `staging_churn`, `base_churn`, and the KPI views. If you use Postgres or another engine, adjust the commands and paths to match your environment.

### 4ï¸âƒ£ Install R and run the R pipeline

**Install R first** (from [CRAN](https://cran.r-project.org/) or your package manager).

In R or RStudio, set the working directory to the project root (e.g. **Session â†’ Set Working Directory â†’ Choose Directory** â†’ select `customer-churn-dashboard`), then run:

```r
setwd("/path/to/customer-churn-dashboard")   # or use Choose Directory in RStudio
source("r/utils/requirements.R")
source("r/scripts/02_kpi_tables.R")
source("r/scripts/03_churn_drivers.R")
```

(Optional: run `source("r/scripts/01_extract_from_sql.R")` if you want `staging_churn` and `base_churn` loaded into your R session.)

### 5ï¸âƒ£ Build or refresh the Tableau dashboard

- Connect Tableau to the CSVs in `data/processed/`.
- Create views for churn rate, segments, and revenue at risk (or open the workbook in `tableau/`).
- Save the workbook as `tableau/dashboard.twbx` (or your preferred name).

---

## ğŸ“ˆ Results (Summary)

| Deliverable | Description |
|-------------|-------------|
| **Churn rate & trend** | Overall and segment-level churn metrics (contract, tenure, internet, payment). |
| **High-risk segments** | e.g. Month-to-month, low tenure, fiber + month-to-month. |
| **Revenue at risk** | MRR from churned customers; % revenue at risk. |
| **Executive dashboard** | Tableau workbook for stakeholders (link and screenshot above). |

â¡ï¸ For pipeline details, metrics definitions, and reproducibility steps, see the full report: [**report.md**](report.md).

---

## ğŸ” Key Questions Answered

- **What is the overall churn rate and how much revenue is at risk?** â€” KPI summary and `kpi_overall.csv`.
- **Which segments churn most?** â€” Breakdowns by contract, tenure bucket, internet service, and payment method.
- **Where is the combination of contract + tenure or contract + internet riskiest?** â€” Heatmaps from `churn_drivers_contract_tenure.csv` and `churn_drivers_contract_internet.csv`.
- **Where should we focus retention efforts first?** â€” MRR at risk by segment and contract Ã— tenure / contract Ã— internet views.

---

## ğŸ§  Tech Stack

- **Data:** Telco Customer Churn ([Kaggle](https://www.kaggle.com/datasets/blastchar/telco-customer-churn))
- **SQL:** Schema, staging, cleaning, KPI views (SQLite / Postgres compatible)
- **R:** DBI, RSQLite, dplyr, tidyr, readr â€” extract, transform, export to CSV
- **Visualization:** Tableau Public (dashboard on processed CSVs)
- **Version control:** Git + GitHub (raw data tracked for GH Pages)

---

## ğŸ§¾ License

MIT License, feel free to use and modify with attribution. See the [`LICENSE`](./LICENSE) file for full details.

---

## ğŸ‘¤ Author

**Ilian Khankhalaev**  
_BSc Computing Science, Simon Fraser University_  
ğŸ“ Vancouver, BC  |  [florykhan@gmail.com](mailto:florykhan@gmail.com)  |  [GitHub](https://github.com/florykhan)  |  [LinkedIn](https://www.linkedin.com/in/ilian-khankhalaev/)
